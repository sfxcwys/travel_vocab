<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Travel Phrasebook App</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Use Inter font family -->
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f4f7f9;
        }
        /* Custom scrollbar styling for aesthetics */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-thumb {
            background: #cbd5e1; /* slate-300 */
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #94a3b8; /* slate-400 */
        }
    </style>
</head>
<body class="min-h-screen flex items-center justify-center p-4">

    <div id="app-container" class="w-full max-w-2xl bg-white shadow-2xl rounded-xl p-6 sm:p-8 transition-all duration-300">
        <!-- Content will be injected here -->
        <div id="content"></div>
    </div>

    <script>
        // --- Data Structure ---
        const travelData = {
            germany: {
                name: "Germany",
                flag: "🇩🇪",
                language: "German",
                phrases: [
                    { english: "Hello", local: "Hallo", pronunciation: "HAH-loh" },
                    { english: "Thank you", local: "Danke", pronunciation: "DAHN-kuh" },
                    { english: "Excuse me / Sorry", local: "Entschuldigung", pronunciation: "ent-SHOOL-dee-goong" },
                    { english: "I need help", local: "Ich brauche Hilfe", pronunciation: "ish BROW-khuh HIL-fuh" },
                    { english: "Where is the toilet?", local: "Wo ist die Toilette?", pronunciation: "VOH ist dee twah-LET-tuh?" },
                    { english: "How much does this cost?", local: "Wie viel kostet das?", pronunciation: "vee FEEL kos-tet das?" },
                    { english: "I would like a coffee", local: "Ich möchte einen Kaffee", pronunciation: "ish MOO-shteh EYEN-en KAH-fay" },
                    { english: "Do you speak English?", local: "Sprechen Sie Englisch?", pronunciation: "SHPREH-khen zee ENG-lish?" }
                ]
            },
            japan: {
                name: "Japan",
                flag: "🇯🇵",
                language: "Japanese",
                phrases: [
                    { english: "Hello (Daytime)", local: "こんにちは", pronunciation: "kon-nee-chee-wah" },
                    { english: "Thank you", local: "ありがとうございます", pronunciation: "ah-ree-gah-toh go-zah-ee-mahss" },
                    { english: "Excuse me / Sorry", local: "すみません", pronunciation: "soo-mee-mah-sen" },
                    { english: "Where is the station?", local: "駅はどこですか？", pronunciation: "eh-kee wah doh-koh dess kah?" },
                    { english: "Delicious", local: "おいしい", pronunciation: "oh-ee-shee" },
                    { english: "I don't understand", local: "わかりません", pronunciation: "wah-kah-ree-mah-sen" },
                    { english: "Check, please", local: "お会計お願いします", pronunciation: "o-ka-i-keh oh-ne-ga-i shi-mass" },
                    { english: "Yes / No", local: "はい / いいえ", pronunciation: "hai / ee-eh" }
                ]
            },
            spain: {
                name: "Spain",
                flag: "🇪🇸",
                language: "Spanish",
                phrases: [
                    { english: "Hello", local: "Hola", pronunciation: "OH-lah" },
                    { english: "Goodbye", local: "Adiós", pronunciation: "ah-dee-OHS" },
                    { english: "Please", local: "Por favor", pronunciation: "por fah-VOHR" },
                    { english: "How are you?", local: "¿Cómo estás?", pronunciation: "KOH-moh ess-TAHS?" },
                    { english: "A beer, please", local: "Una cerveza, por favor", pronunciation: "OO-nah ser-VEH-sah, por fah-VOHR" },
                    { english: "The bill, please", local: "La cuenta, por favor", pronunciation: "lah KWEHN-tah, por fah-VOHR" },
                    { english: "Help me", local: "Ayúdeme", pronunciation: "ah-yoo-DEH-meh" },
                    { english: "I am lost", local: "Estoy perdido/a", pronunciation: "ess-TOY per-DEE-doh/dah" }
                ]
            }
        };

        // --- State Management ---
        const appState = {
            view: 'selection', // 'selection' or 'vocabulary'
            selectedCountryKey: null,
            expandedPhrases: {} // { phraseId: true/false }
        };

        const contentDiv = document.getElementById('content');
        
        // --- Utility Functions ---

        /**
         * Generates a unique ID for a phrase based on its content.
         * @param {string} englishPhrase
         * @returns {string}
         */
        function generatePhraseId(englishPhrase) {
            return 'p-' + englishPhrase.replace(/\s/g, '').toLowerCase().substring(0, 15);
        }
        
        /**
         * Switches the view to the country selection screen.
         */
        function goToSelection() {
            appState.view = 'selection';
            appState.selectedCountryKey = null;
            appState.expandedPhrases = {};
            render();
        }

        /**
         * Switches the view to the vocabulary list for the chosen country.
         * @param {string} countryKey - Key from travelData (e.g., 'germany')
         */
        function selectCountry(countryKey) {
            appState.selectedCountryKey = countryKey;
            appState.view = 'vocabulary';
            render();
        }

        /**
         * Toggles the visibility of a phrase's local translation and pronunciation.
         * @param {string} phraseId - The unique ID of the phrase element.
         */
        function togglePhrase(phraseId) {
            appState.expandedPhrases[phraseId] = !appState.expandedPhrases[phraseId];
            render(); // Re-render to reflect the expansion state change
        }

        // --- View Rendering ---

        /**
         * Renders the country selection view.
         */
        function renderCountrySelection() {
            const countryButtons = Object.keys(travelData).map(key => {
                const data = travelData[key];
                return `
                    <button onclick="selectCountry('${key}')"
                        class="flex flex-col items-center justify-center p-4 bg-gray-100 hover:bg-indigo-100/50 transition duration-300 ease-in-out transform hover:scale-[1.02] rounded-lg shadow-md hover:shadow-lg focus:outline-none focus:ring-4 focus:ring-indigo-500/50 w-full"
                    >
                        <span class="text-4xl mb-2">${data.flag}</span>
                        <span class="text-lg font-semibold text-gray-800">${data.name}</span>
                        <span class="text-sm text-gray-500">${data.language}</span>
                    </button>
                `;
            }).join('');

            contentDiv.innerHTML = `
                <h1 class="text-3xl sm:text-4xl font-extrabold text-indigo-700 mb-2 text-center">
                    Travel Phrasebook
                </h1>
                <p class="text-gray-500 mb-8 text-center">
                    Select your destination to learn essential phrases.
                </p>
                <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                    ${countryButtons}
                </div>
            `;
        }

        /**
         * Renders the vocabulary list view for the selected country.
         */
        function renderVocabularyList() {
            const countryKey = appState.selectedCountryKey;
            const country = travelData[countryKey];

            if (!country) {
                goToSelection(); // Fallback if data is missing
                return;
            }

            const phraseListHtml = country.phrases.map(phrase => {
                const id = generatePhraseId(phrase.english);
                const isExpanded = appState.expandedPhrases[id];
                const icon = isExpanded ? '−' : '+';
                const detailClass = isExpanded ? 'max-h-96 opacity-100 pt-3' : 'max-h-0 opacity-0 pt-0';

                return `
                    <div class="border-b border-gray-200 last:border-b-0">
                        <!-- Clickable Header -->
                        <div id="${id}"
                            onclick="togglePhrase('${id}')"
                            class="flex justify-between items-center p-4 cursor-pointer bg-white hover:bg-indigo-50 transition-colors duration-200 rounded-lg"
                        >
                            <span class="text-lg font-medium text-gray-700">${phrase.english}</span>
                            <span class="text-2xl font-bold text-indigo-600 transition-transform duration-200">${icon}</span>
                        </div>

                        <!-- Expanded Detail Content -->
                        <div class="overflow-hidden transition-all duration-300 ease-in-out ${detailClass}">
                            <div class="bg-indigo-50 p-4 rounded-b-lg border-t border-indigo-100">
                                <p class="mb-2">
                                    <span class="font-semibold text-indigo-700">${country.language}:</span>
                                    <span class="text-xl font-bold text-gray-800">${phrase.local}</span>
                                </p>
                                <p class="text-sm text-gray-600">
                                    <span class="font-semibold">Pronunciation:</span>
                                    <span class="italic">${phrase.pronunciation}</span>
                                </p>
                            </div>
                        </div>
                    </div>
                `;
            }).join('');

            contentDiv.innerHTML = `
                <div class="flex items-center justify-between mb-6">
                    <h1 class="text-2xl sm:text-3xl font-extrabold text-indigo-700">
                        ${country.flag} ${country.name} Phrases
                    </h1>
                    <button onclick="goToSelection()"
                        class="bg-gray-200 text-gray-700 px-3 py-1.5 rounded-full text-sm font-medium hover:bg-gray-300 transition-colors shadow-sm"
                    >
                        Change Country
                    </button>
                </div>
                
                <p class="text-gray-500 mb-4">Click any phrase to see the local translation and pronunciation guide.</p>

                <div class="bg-white border border-gray-200 rounded-xl overflow-hidden shadow-lg">
                    ${phraseListHtml}
                </div>
            `;
        }

        /**
         * Main render function that checks the state and calls the correct renderer.
         */
        function render() {
            if (appState.view === 'selection') {
                renderCountrySelection();
            } else if (appState.view === 'vocabulary') {
                renderVocabularyList();
            }
        }

        // --- Initialization ---
        window.onload = function() {
            // Initial render when the page loads
            render();
        };

        // Attach global functions to window for onclick handlers to work
        window.selectCountry = selectCountry;
        window.goToSelection = goToSelection;
        window.togglePhrase = togglePhrase;

    </script>
</body>
</html>
